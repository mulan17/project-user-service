1. Яким чином клієнт (фронтенд, наприклад) знає, який ID використати?
https://github.com/mulan17/project-user-service/blob/main/cmd/app/main.go#L30
часто роблять GET /users/me, який бере айді поточного користувача з авторизації
також, звичайний користувач не повинен мати можливості отримати дані іншого користувача, це варто враховувати

2. Варто використовувати коректні дефолтні значення (вже обговорювали). User name і так далі.

3.  DONE ID повинен бути реально унікальним, згенерованим базою даних, наприклад (обговорювали, документую).

4. Треба завжди перевіряти на помилки і перевіряти саме вбудованим механізмом (errors.Is), а не перевіркою конкретних рядків: https://github.com/mulan17/project-user-service/blob/main/internal/user/handler.go#L48

5. Треба додати авторизацію до всіх необхідних хендлерів, а також додати окремий хендлер для перевірки авторизації іншими сервісами.

6. Нікуди не передавати пароль (JSON responses) та уніфікувати підхід до його перевірки. Тобто, зберігати в базі не пароль, а хеш, як того очікує модуль перевірки токенів.

7. Зробити ревʼю проєкту та поприбирати зайве логування, закоменчений код і так далі.

8. Токен повинен мати валідацію по його довжині життя. Тобто, в токені записується шось типу issued at або valid until і далі при валідації дивимося чи дійсно цей токен все ще валідний. Хороша практика не мати паролів / токенів / ключів доступу, які живуть безкінечно. Також, цей токен можна оновлювати при кожному запиті.
Яким саме чином токен потрапляє до клієнта? Не бачу зараз цього в коді. Просто в тілі? Cookie?



Пред захист
- Додати повернення помилки. 54 рядок storage.go приклад що у нас реалізовано там "якщо у нас повертається помилка, яка говорить база не доступна, ми заходимо в цю строчку 55 if err != nil логуємо це а потім все одно повертаємо exist false і потім той хто використував цю функцію буде думати, що все обробилось ок і просто користувала з таким мейлом не існує, а на самом деле зафейлівся запит в базу". Завжди повертаємо помилку, якщо в середині відбулась помилка.
- DONE - (тут Саши комент номер 3) id генерування - краще використувави id котре генерує база данних
- (тут Саши коммент номер 2) прибрати заповнені вже name and lastname. можно в постгрес використати null - користувач не ввів, коли пусто - то це користувач ввів пусто. В го це поінтер на стрінг (в залежності від наших фреймворків)
- Роголуження адміна та байера: перевірка на рівні нашого ip, не може бути такого щоб баер хтось міг визвати хендлер. Тобто якщо дергає баер цей хендлер - вибило анаторізайтед. Тобто отримати через токет id ходити по id в базу та отримати роль
- на sing-up просто зберигаться пароль, а потібно використати хешування Даши
- Хендлер валідейт токета щоб відати іншим сервісам



Наши туду
Доробити логін, присвоювання токену
Зробити ендпоінт для інших сервісів
Buyer не може отримувати і редагувати role and blocked
Error покращіти описи та обмазати заміть bool (дублювання з Сашиним)
Причесати документацію